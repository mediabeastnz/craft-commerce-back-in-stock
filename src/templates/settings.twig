{#
/**
 * Back In Stock plugin for Craft CMS 3.x
 *
 * Back In Stock Settings.twig
 *
 * @author    Myles Beardsmore
 * @copyright Copyright (c) 2019 Myles Beardsmore
 * @link      https://www.mylesthe.dev/
 * @package   BackInStock
 */
#}

{% import "_includes/forms" as forms %}

{% set craftSettings = craft.app.systemSettings.getSettings('email') %}

{{ forms.autosuggestField({
    first: true,
    label: 'From Email Address',
    instructions: 'The email address that confirmation and notification emails are sent from. Leave blank to use the System Email Address defined in Craft’s General Settings.',
    id: 'fromEmail',
    name: 'fromEmail',
    placeholder: craftSettings.fromEmail ?? '',
    value: settings.fromEmail,
    errors: settings.getErrors('fromEmail'),
    suggestEnvVars: true,
    autofocus: true,
}) }}

{{ forms.autosuggestField({
    label: 'From Name',
    instructions: 'The “From” name that will be used when sending confirmation and notification emails. Leave blank to use the Sender Name defined in Craft’s General Settings.',
    id: 'fromName',
    name: 'fromName',
    placeholder: craftSettings.fromName ?? '',
    value: settings.fromName,
    errors: settings.getErrors('fromName'),
    suggestEnvVars: true,
    autofocus: true,
}) }}

{{ forms.lightswitchField({
    label: "Send email confirmation to customer",
    instructions: 'A confirmation email will be sent to the customer if they request to be notified',
    name: 'sendConfirmation',
    on: settings.sendConfirmation
}) }}

{{ forms.textField({
    label: "Confirmation Email Template",
    name: 'confirmationEmailTemplate',
    value: settings.confirmationEmailTemplate,
    placeholder: 'craft-commerce-back-in-stock/emails/confirmation',
    instructions: 'Use a custom template for the confirmation email.',
    errors: settings.getErrors('confirmationEmailTemplate')
}) }}

{{ forms.textField({
    label: "Confirmation Email Subject",
    name: 'confirmationEmailSubject',
    value: settings.confirmationEmailSubject,
    placeholder: 'Back in stock notification confirmation for {{variant.title}}',
    errors: settings.getErrors('confirmationEmailSubject')
}) }}

{{ forms.textField({
    label: "Email Template",
    name: 'emailTemplate',
    value: settings.emailTemplate,
    placeholder: 'craft-commerce-back-in-stock/emails/notification',
    instructions: 'Use a custom template for the notification email, this gets sent when an item is back in stock',
    errors: settings.getErrors('emailTemplate')
}) }}

{{ forms.textField({
    label: "Email Subject",
    name: 'emailSubject',
    value: settings.emailSubject,
    placeholder: 'Order today, {{variant.title}} is now in stock',
    errors: settings.getErrors('emailSubject')
}) }}

{{ forms.lightswitchField({
    first: false,
    label: "Automatically Purge Notification Requests",
    instructions: 'Purge notification requests from the database when a notification is successfully sent.',
    name: 'purgeRequests',
    on: settings.purgeRequests
}) }}
